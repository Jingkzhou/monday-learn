# Monday Learn 业务需求文档 (v1.1 进阶版)

## 1. 项目概述
**Monday Learn** 是一个现代化的智能单词学习平台，旨在通过个性化的学习工具和 AI 辅助功能，帮助用户高效掌握词汇和知识点。v1.1 版本在基础学习闭环之上，新增了游戏化学习模式、班级社区功能以及更强大的 AI 配置能力。

## 2. 用户角色
*   **普通用户 (Learner)**: 注册并登录系统的用户，可以创建学习集、进行学习、查看进度和管理个人资料。

## 3. 核心功能模块

### 3.1 用户认证与个人中心 (Authentication & Profile)
*   **注册与登录**:
    *   支持邮箱/密码注册和登录。
    *   使用 JWT (JSON Web Token) 进行安全认证。
*   **个人资料管理**:
    *   **查看资料**: 显示用户名、邮箱、注册时间。
    *   **编辑资料**:
        *   修改用户名。
        *   **头像选择**: 提供预设的可爱头像库 (SVG/PNG) 供用户选择，支持实时预览。
        *   显示用户头像或首字母缩写。

### 3.2 首页与仪表盘 (Dashboard)
*   **继续学习 (Hero Section)**:
    *   展示最近一次学习的学习集。
    *   可视化进度环 (Mastered vs Total)。
    *   快速入口："继续挑战"、"创建学习集"。
*   **近期访问 (Recent Activity)**:
    *   Carousel (轮播) 展示最近访问的学习集。
    *   悬浮显示翻页按钮，交互体验流畅。
*   **快速入口**:
    *   单词卡 (Word Cards)、成就奖章、学习统计、班级社区等功能入口。
*   **AI 学习诊断**:
    *   生成个性化学习报告的入口 (Mock/AI 集成)。

### 3.3 学习集管理 (Study Sets Management)
*   **创建学习集**:
    *   **手动创建**: 输入标题、描述，逐个添加词语 (Term) 和定义 (Definition)。
    *   **AI 生成**: 输入主题或文本，由 AI 自动生成词语和定义。
    *   **权限设置**: 设置公开 (Public) 或私有 (Private)。
*   **查看学习集**:
    *   展示学习集详情、作者信息、词语列表。
    *   支持收藏 (Star) 特定词语。
*   **编辑与删除**:
    *   作者可编辑标题、描述、词语内容。
    *   作者可删除学习集。
*   **克隆 (Clone)**:
    *   用户可以克隆公开的学习集到自己的库中进行修改和学习。

### 3.4 学习模式 (Learning Modes)
针对每个学习集，提供多种学习方式：
1.  **单词卡 (Flashcards)**:
    *   模拟真实卡片，点击翻转查看正反面 (Term/Definition)。
    *   支持键盘快捷键 (空格翻转，箭头切换)。
    *   动画效果流畅。
2.  **学习模式 (Learn Mode)**:
    *   自适应学习，通过多选题或填空题形式巩固记忆。
    *   实时反馈对错。
    *   进度追踪 (熟悉、掌握)。
3.  **测试模式 (Test Mode)**:
    *   生成试卷进行自我检测。
    *   包含选择题、判断题、配对题等多种题型。
    *   提交后自动评分。
4.  **配对消除 (Match Mode)**:
    *   游戏化学习，限时消除对应的词语和定义。
    *   记录最佳时间，挑战自我。
5.  **陨石撞击 (Blast Mode)**:
    *   趣味打字游戏，在陨石撞击前输入正确单词。
    *   难度递增，锻炼拼写速度。

### 3.5 单词卡库 (Library/Word Cards)
*   **我的单词卡**:
    *   展示用户创建和收藏的所有学习集。
    *   **智能分组**: 按时间维度 (今天、本周、本月、更早) 自动分组展示。
    *   显示每个学习集的词语数量、作者等元数据。

### 3.7 班级与社区 (Classes & Community)
*   **班级管理**:
    *   创建和加入班级。
    *   班级内共享学习集。
*   **排行榜**:
    *   查看班级成员的学习进度和积分排名。

### 3.8 学习足迹日历 (Learning Footprint Calendar)
#### 3.8.1 设计目标
该模块旨在以直观的日历形式，可视化展示用户的每日学习投入和成果。对于家长角色（或关注自身进度的学习者），它提供了监控学习连续性、回顾历史表现以及发现薄弱环节的窗口。

#### 3.8.2 核心界面与交互
1.  **月度热力图视图 (Monthly Heatmap View)**
    *   **界面布局**: 在仪表盘 (Dashboard) 或独立的“进度”页面展示一个标准的月历视图。
    *   **视觉编码 (Visual Encoding)**: 参考 GitHub Contribution 风格，用不同深浅的主题色块来表示当日的学习强度。
        *   **灰色/空白**: 当日无学习活动。
        *   **浅色**: 完成了少量学习（例如：仅翻看了单词卡，少于 10 分钟）。
        *   **中等色**: 完成了标准的学习任务（例如：完成了 Learn Mode 一个单元，约 15-30 分钟）。
        *   **深色/高亮**: 高强度学习或取得了重要成就（例如：高分通过 Test Mode，学习时长超过 45 分钟）。
    *   **关键指标摘要**: 在日历上方清晰展示：
        *   **当前连续打卡天数 (Current Streak)**: 激励坚持。
        *   **本月学习总天数**: 概览。
        *   **本月总学习时长**: (可选，如果后端有记录时长)。
    *   **交互**: 点击日历上的任意有数据的日期，侧边栏或弹窗滑出，显示“每日详情”。

2.  **每日详情面板 (Daily Detail Panel)**
    *   当用户点击某个特定日期时显示。
    *   **当日概览**:
        *   显示日期和当日总学习时长。
        *   如果当日有特殊成就（如获得徽章、测试满分），给予高亮展示。
    *   **活动时间轴 (Activity Timeline)**: 按时间倒序详细列出当日的所有操作记录：
        *   (09:30 AM) 学习了集：[生物学术语]，模式：[单词卡]，浏览了 20/20 个词。
        *   (09:45 AM) 完成了测试：[托福高频词 - Day 1]，模式：[测试模式]，得分：92分 (A)。
        *   (08:00 PM) 玩了游戏：[化学元素]，模式：[陨石撞击]，最高连击：15。
    *   **掌握度变化 (Progress Snapshot)**:
        *   显示当日新增了多少个“已掌握 (Mastered)”的单词。

#### 3.8.3 数据埋点与后端支持需求 (Technical Implications)
为了实现上述功能，后端需要在现有的学习记录基础上进行聚合。
*   **新增数据表 (推荐): `daily_learning_summary`**
    *   **目的**: 为了快速渲染月度日历，避免每次都去查询庞大的原始活动日志表。每天结束后（或特定事件触发时）更新此表。
    *   **字段示例**:
        *   `user_id`: 用户ID
        *   `date`: 日期 (YYYY-MM-DD)
        *   `total_time_spent`: 当日总秒数
        *   `total_words_reviewed`: 当日复习单词总数
        *   `activity_level`: 活动等级 (0-3, 用于前端渲染热力图颜色深浅)
        *   `key_achievement_id`: 当日最重要的成就 ID (可选)
*   **现有的详细日志表优化**:
    *   确保每次学习模式结束时 (Flashcards, Learn, Test, Game)，后端都能记录一条详细的 Log，包含：时间戳、学习集ID、模式类型、结果数据（分数、进度）。

### 3.6 AI 智能特性 (AI Features)
*   **AI 辅助创建**: 基于 Google Gemini 模型，根据用户输入的主题快速生成高质量的学习集内容。
*   **AI 学习报告**: 分析用户的学习历史、强弱项，生成个性化的学习建议和鼓励语。
*   **AI 配置管理**: 管理员可配置 AI 模型参数、Prompt 模板，灵活调整 AI 行为。

## 4. 技术栈 (Technical Stack)
*   **前端**: React, TypeScript, Tailwind CSS, Lucide React (Icons), Framer Motion (Animations).
*   **后端**: Python, FastAPI, SQLAlchemy, Pydantic.
*   **数据库**: MySQL.
*   **AI 集成**: Google Gemini API.

## 5. 后续规划 (Roadmap v1.2+)
*   **移动端原生应用**: 开发 React Native 版本，提供更好的移动端体验。
*   **多语言支持 (i18n)**: 支持界面多语言切换。
*   **高级数据分析**: 提供更详细的学习报表和遗忘曲线分析。
*   **支付与订阅**: 引入会员系统，解锁高级 AI 功能。
*   **语音交互**: 增加单词发音和语音输入练习。
